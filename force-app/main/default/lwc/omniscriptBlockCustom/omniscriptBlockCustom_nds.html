<template>
    <div class="nds-size_1-of-1">
      <div class={blockClasses}>
        <div class="nds-form-element__control nds-block_container">
          <label class="nds-form-element__label nds-clearfix"
                 role="button"
                 tabindex="0">
            <template if:true={_propSetMap.repeat}>
              <div if:true={blockLabel}
                   class="nds-grid nds-size_1-of-1"
                   onclick={toggleContent}>
                <vlocity_ins-icon extraclass="nds-block__action-icon nds-button__icon nds-button__icon-left"
                        icon-name="utility:switch"
                        theme="nds"
                        alternative-text="Toggle Content"
                        size="small">
                </vlocity_ins-icon>
                <div class="nds-form-element__label_toggle-text">
                  {blockLabel}
                  <div if:true={showValidation}
                       class="nds-has-error">
                    <div class="nds-form-element__help nds-form-element__help_text-transform__none">
                      <span class="nds-text-link_faux"
                            onclick={toggleContent}>
                        {allCustomLabelsUtil.OmniBlockError}
                      </span>
                    </div>
                  </div>
                </div>
                <div class="nds-control-action__container">
                </div>
              </div>
            </template>
            <template if:false={_propSetMap.repeat}>
              <div if:true={blockLabel}
                   class="nds-grid nds-size_1-of-1"
                   onclick={toggleContent}>
                <vlocity_ins-icon extraclass="nds-block__action-icon nds-button__icon nds-button__icon-left"
                        icon-name="utility:switch"
                        theme="nds"
                        alternative-text="Toggle Content"
                        size="small">
                </vlocity_ins-icon>
                <div class="nds-form-element__label_toggle-text">
                  {blockLabel}
                  <div if:true={showErrorMessage}
                       class="nds-has-error">
                    <div class="nds-form-element__help nds-form-element__help_text-transform__none">
                      {allCustomLabelsUtil.OmniBlockError}
                    </div>
                  </div>
                </div>
                <div class="nds-control-action__container">
                </div>
              </div>
            </template>
          </label>
          <div class="nds-size_1-of-1 nds-block_body"
               aria-hidden="false"
               aria-expanded={expandContent}>
            <div class="nds-grid nds-wrap nds-grid_pull-padded">
              <slot></slot>
              <template if:true={_propSetMap.repeat}>
                <div class="nds-m-top_medium">
                    <div class="nds-button-group"
                        role="group">
                        <vlocity_ins-button if:true={canRepeat}
                                    variant="neutral"
                                    onclick={handleAdd}
                                    label={allCustomLabelsUtil.OmniAdd}
                                    theme={_theme}>
                        </vlocity_ins-button>
                        <vlocity_ins-button if:true={canRemove}
                                    variant="neutral"
                                    onclick={handleRemove}
                                    label={allCustomLabelsUtil.OmniDelete}
                                    class="nds-m-left_x-small"
                                    theme={_theme}>
                        </vlocity_ins-button>
                    </div>
                </div>
              </template>
            </div>
          </div>
        </div>
      </div>
    </div>
  </template>